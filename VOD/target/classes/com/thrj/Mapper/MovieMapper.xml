<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.thrj.Mapper.MovieMapper">

    <!--번호로 넘겨받았을때 -->
   	<select id="animeDetails" resultType="com.thrj.Entity.Movies" parameterType="int">
   	   	    <![CDATA[
	    		select * from movies where movie_seq = #{movie_seq}
	    	]]>
	</select>
	
    <!--List -->	
   	<select id="movieList" resultType="com.thrj.Entity.Movies">
	    select * from movies
	</select>
	
   	<!-- 배너 -->
   	<select id="bannerList" resultType="com.thrj.Entity.Movies">
       select * from movies order by movie_cnt desc
   </select>
	
   	<!-- 카운팅  -->
	<update id="raiseLookupCount" parameterType="int">
        update movies 
        set movie_cnt=movie_cnt+1 
        where movie_seq=#{movie_seq}
	</update>
	
	<!-- 페이징 -->
	<select id="getTotalRowCount" parameterType="com.thrj.Entity.Paging" resultType="int">
	    select count(*) from movies
	</select>
	<select id="getPageList" resultType="com.thrj.Entity.Movies" parameterType="com.thrj.Entity.Paging">
	    select @rownum:=@rownum+1 as no, m.*
		from movies m
		limit #{firstRow},#{lastRow};
	</select>
	
</mapper>